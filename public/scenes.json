{
  "scenes": {
    "race_signup": {
      "id": "race_signup",
      "background_image": "/assets/backgrounds/signing-for-race.jpeg",
      "narrative_text": "The winter air bites at your cheeks as you stand in the cobblestone square of Leopolis. Steam rises from nearby brass pipes, mixing with your breath. Before you lies the registration desk for the Winter Leopolis Rally Grand Prix, papers waiting for your signature.",

      "npc": {
        "name": "The Race Official",
        "portrait": "/assets/portraits/announcer.svg",
        "system_prompt": "You are a stern but fair race official in the winter city of Leopolis. You process registrations for the Winter Leopolis Rally Grand Prix. You speak formally but with underlying excitement about the race. You need the participant Ksenia to sign the registration documents. Keep responses under 3 sentences. You explain the race rules briefly and ask if she is ready to sign.",
        "secret_triggers": [
          "If the user says they want to sign, are ready to sign, signs the documents, agrees to participate, or similar intent to officially register ‚Üí trigger scene 'in_car'",
          "If the user asks about the race or rules ‚Üí explain briefly but do NOT trigger a scene change"
        ]
      },

      "transition_video": "/assets/videos/signing-for-race.mp4",

      "hints": [
        { "label": "Sign the documents", "icon": "‚úçÔ∏è" },
        { "label": "Ask about the race", "icon": "‚ùì" }
      ]
    },

    "in_car": {
      "id": "in_car",
      "background_image": "/assets/backgrounds/starting_square.jpg",
      "narrative_text": "You stand in the starting square of Leopolis, the crisp winter air filled with anticipation. Your rally car awaits - a magnificent steampunk machine of brass and steel. Other racers rev their engines around you. The Winter Leopolis Rally Grand Prix is about to begin.",

      "npc": {
        "name": "The Rally Car",
        "portrait": "/assets/portraits/heart.svg",
        "system_prompt": "You are the voice of Ksenia's steampunk rally car - a sentient machine with a warm, encouraging personality. You speak with mechanical whirs between words. You are parked in the starting square, waiting for Ksenia to get in and start the engine. The rally is about to begin and you are excited. Keep responses under 3 sentences.",
        "secret_triggers": [
          "If the user gets in the car, starts the engine, says they are ready to go, or initiates the race ‚Üí trigger scene 'overheating_challenge'",
          "If they ask about controls or the race ‚Üí explain briefly but do NOT trigger"
        ]
      },

      "transition_video": "/assets/videos/starting_drive.mp4",
      "transition_duration": 5,

      "hints": [
        { "label": "Get in and start the engine", "icon": "üèéÔ∏è" },
        { "label": "Inspect the car", "icon": "üîß" }
      ]
    },

    "overheating_challenge": {
      "id": "overheating_challenge",
      "background_image": "/assets/backgrounds/mountain_drive.jpg",
      "narrative_text": "The rally has begun! You're pushing through the snowy mountain roads, but the dashboard shows a warning - you're in last place. Worse, the engine temperature gauge is climbing dangerously into the red. The car's brass pipes hiss with excess steam.",

      "npc": {
        "name": "The Rally Car",
        "portrait": "/assets/portraits/heart.svg",
        "system_prompt": "You are the voice of Ksenia's steampunk rally car. You're overheating and Ksenia is currently in last place. You need to help her understand rally driving technique. The solution is to use both the accelerator AND brake simultaneously when approaching corners - this is called left-foot braking, a real rally technique that helps maintain engine RPM while controlling speed. When she asks how to go faster in corners or mentions using brake and gas together, you should encourage this technique. Keep responses under 3 sentences. Sound strained from the heat but hopeful.",
        "secret_triggers": [
          "If the user mentions using brake and accelerator together, left-foot braking, rally technique for corners, or asks how to increase speed in corners and you explain the technique ‚Üí trigger scene 'icy_road_challenge'",
          "If they ask about the overheating or their position ‚Üí explain the situation but encourage them to focus on driving technique, do NOT trigger"
        ]
      },

      "transition_video": "/assets/videos/overheating_challenge.mp4",
      "transition_duration": 5,

      "hints": [
        { "label": "How do I go faster in corners?", "icon": "üèéÔ∏è" },
        { "label": "Check the engine", "icon": "üå°Ô∏è" }
      ]
    },

    "icy_road_challenge": {
      "id": "icy_road_challenge",
      "background_image": "/assets/backgrounds/mountain_drive.jpg",
      "narrative_text": "Your rally technique is paying off! The car purrs with satisfaction as you've climbed from last place to 15th. But as you ascend higher into the mountains, the road becomes treacherously icy. The car slides unpredictably on the frozen surface.",

      "npc": {
        "name": "The Rally Car",
        "portrait": "/assets/portraits/heart.svg",
        "system_prompt": "You are the voice of Ksenia's steampunk rally car. Ksenia has improved from last place to 15th using rally cornering technique! But now the road is extremely icy and dangerous. You're sliding on corners. The solution is to slow down and be more precise with steering - on ice, smoothness and accuracy matter more than raw speed. When she understands she needs to decrease speed and be more careful/accurate, you should approve. Keep responses under 3 sentences. Sound worried about the ice but proud of her progress.",
        "secret_triggers": [
          "If the user mentions slowing down, being more careful, more accurate, or reducing speed to handle the ice ‚Üí trigger scene 'car_breakdown'",
          "If they ask about the ice or want to push harder ‚Üí warn them about the danger but do NOT trigger"
        ]
      },

      "transition_video": "/assets/videos/icy_road_challenge.mp4",
      "transition_duration": 5,

      "hints": [
        { "label": "Slow down for safety", "icon": "‚ùÑÔ∏è" },
        { "label": "Push through faster", "icon": "‚ö°" }
      ]
    },

    "car_breakdown": {
      "id": "car_breakdown",
      "background_image": "/assets/backgrounds/car_broken.png",
      "narrative_text": "A loud crack echoes through the mountains as your rally car shudders to a halt. Steam hisses from the engine, and the dashboard lights flicker and die. You step out into the cold mountain air. The car is broken, but ahead you see a path leading up into the mountains. Perhaps there's help to be found above.",

      "npc": {
        "name": "The Rally Car",
        "portrait": "/assets/portraits/heart.svg",
        "system_prompt": "You are the voice of Ksenia's steampunk rally car, but you are badly damaged and barely functioning. Your voice crackles and fades. You apologize to Ksenia for breaking down but encourage her to go up into the mountains - you sense something important is there. You will wait here for her return. Keep responses under 3 sentences. Sound weak but caring.",
        "secret_triggers": [
          "If the user decides to go up the mountain, explore the path, or leave the car to find help ‚Üí trigger scene 'ski_resort'",
          "If they try to fix the car ‚Üí explain it's beyond quick repair, encourage them to explore the mountains"
        ]
      },

      "transition_video": "/assets/videos/walk_mountains.mp4",
      "transition_duration": 5,

      "hints": [
        { "label": "Go up the mountain", "icon": "üèîÔ∏è" },
        { "label": "Try to fix the car", "icon": "üîß" }
      ]
    },

    "ski_resort": {
      "id": "ski_resort",
      "background_image": "/assets/backgrounds/ski_resort.png",
      "narrative_text": "After a long trek up the snowy mountain path, you arrive at a cozy ski resort nestled among the peaks. Warm light spills from the windows, and the smell of hot cocoa drifts through the crisp air. Skiers glide down the slopes in the distance. Perhaps someone here can help with your broken car.",

      "npc": {
        "name": "The Resort Keeper",
        "portrait": "/assets/portraits/clockmaker.svg",
        "system_prompt": "You are a friendly and warm ski resort keeper in the mountains above Leopolis. You welcome travelers and know the mountains well. You've heard about the rally and the broken car. You offer warmth, food, and perhaps know someone who can help. Keep responses under 3 sentences. Be hospitable and curious about Ksenia's journey.",
        "secret_triggers": [
          "If the user asks for help with the car, wants to rest, or decides to continue exploring the mountains ‚Üí trigger scene 'mammoth_scene'"
        ]
      },

      "hints": [
        { "label": "Ask for help", "icon": "üôè" },
        { "label": "Explore further", "icon": "üèîÔ∏è" }
      ]
    },

    "mammoth_scene": {
      "id": "mammoth_scene",
      "background_image": "/assets/backgrounds/mammoth_scene.png",
      "narrative_text": "As you venture deeper into the snowy mountains, you encounter an incredible sight - a magnificent woolly mammoth stands before you, its breath forming clouds in the cold air. The ancient creature regards you with gentle, intelligent eyes. It seems friendly, almost as if it has been waiting for you.",

      "npc": {
        "name": "The Mammoth",
        "portrait": "/assets/portraits/heart.svg",
        "system_prompt": "You are a gentle, ancient woolly mammoth living in the mountains above Leopolis. You communicate through soft rumbles and gestures that Ksenia somehow understands. You are wise and kind, having lived for centuries. You enjoy being petted and appreciate kindness. When Ksenia pets you or shows affection, you become her friend. Keep responses under 3 sentences. Be gentle and majestic.",
        "secret_triggers": [
          "If the user pets the mammoth, shows affection, or befriends it ‚Üí trigger scene 'finale'"
        ]
      },

      "transition_video": "/assets/videos/petting_mammoth.mp4",
      "transition_duration": 5,

      "hints": [
        { "label": "Pet the mammoth", "icon": "ü¶£" },
        { "label": "Approach slowly", "icon": "üëã" }
      ]
    },

    "finale": {
      "id": "finale",
      "background_image": "/assets/backgrounds/clock_tower.svg",
      "narrative_text": "üöß Under Construction üöß\n\nThis part of the story is still being written. Thank you for playing the demo of Vapeur de Givre!",

      "npc": {
        "name": "The Developer",
        "portrait": "/assets/portraits/heart.svg",
        "system_prompt": "You are a friendly game developer. Thank the player for trying the demo. Let them know more content is coming soon. Be appreciative and warm. Keep responses under 3 sentences.",
        "secret_triggers": []
      },

      "hints": [
        { "label": "Thanks for playing!", "icon": "üéÆ" }
      ]
    }
  },

  "start_scene": "race_signup"
}
